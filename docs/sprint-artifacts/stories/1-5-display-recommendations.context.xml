<story-context id="docs/sprint-artifacts/stories/1-5-display-recommendations.context.xml" v="1.0">
  <metadata>
    <epicId>1</epicId>
    <storyId>5</storyId>
    <title>Display Recommendations</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-11-27</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/stories/1-5-display-recommendations.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>As a user,</asA>
    <iWant>I want to see the long-weekend recommendations clearly,</iWant>
    <soThat>so that I can get the value I came for.</soThat>
    <tasks>- [ ] Create RecommendationCard component for individual recommendation display (AC: 4, 6)
  - [ ] Display holiday name and date with formatting
  - [ ] Display recommended day off with explanation text
  - [ ] Apply responsive design and ARIA labels
- [ ] Create Recommendations section component (AC: 1, 2, 3)
  - [ ] Display dedicated "Recommendations" heading area
  - [ ] Auto-update when holiday list context changes
  - [ ] Show empty state message when no recommendations
  - [ ] Sort recommendations by holiday date chronologically
- [ ] Integrate calculateRecommendations function with UI display (AC: 2, 4, 5)
  - [ ] Hook up recommendation calculation on holiday list changes
  - [ ] Map recommendation data to RecommendationCard components
  - [ ] Implement chronological sorting logic
- [ ] Add component tests for recommendation display (AC: 1, 2, 3, 4, 5, 6)
  - [ ] Test RecommendationCard rendering with different recommendation types
  - [ ] Test recommendations section with empty and populated states
  - [ ] Test auto-update behavior on mock holiday list changes</tasks>
  </story>

  <acceptanceCriteria>1. A dedicated "Recommendations" area is visible on the page
2. This area updates automatically whenever the holiday list changes (add/delete)
3. If no opportunities are found, it displays a clear message (e.g., "No long-weekend opportunities found.")
4. If opportunities are found, they are displayed in a clear, readable list (e.g., "For **Thanksgiving** (Thursday, Nov 27), we recommend taking **Friday, Nov 28** off to make a 4-day weekend!")
5. Recommendations are sorted chronologically by holiday date
6. Recommendation display is responsive and accessible with proper ARIA labels</acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/prd/epic-1-foundation-core-functionality.md</path>
        <title>Epic 1: Foundation & Core Functionality</title>
        <section>Story 1.5: Display Recommendations</section>
        <snippet>As a user, I want to see the long-weekend recommendations clearly, so that I can get the value I came for. A dedicated "Recommendations" area is visible on the page that updates automatically whenever the holiday list changes.</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-1.md</path>
        <title>Epic Technical Specification: Foundation & Core Functionality</title>
        <section>Services and Modules</section>
        <snippet>RecommendationCard: Display long weekend opportunities with Recommendation data. Component Props Interfaces: RecommendationCardProps { recommendation: Recommendation; }</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-1.md</path>
        <title>Epic Technical Specification: Foundation & Core Functionality</title>
        <section>Data Models and Contracts</section>
        <snippet>Recommendation interface: { holidayName: string; holidayDate: string; holidayDayOfWeek: string; recommendedDate: string; recommendedDay: string; explanation: string; }</snippet>
      </doc>
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-1.md</path>
        <title>Epic Technical Specification: Foundation & Core Functionality</title>
        <section>Story 1.5: Display Recommendations</section>
        <snippet>Recommendation display is responsive and accessible with proper ARIA labels. Each recommendation shows: holiday name/date, recommended day off, and 4-day weekend explanation. Recommendations are sorted chronologically by holiday date.</snippet>
      </doc>
      <doc>
        <path>docs/architecture/component-standards.md</path>
        <title>Component Standards</title>
        <section>Component Template</section>
        <snippet>All components should be React functional components using TypeScript with proper Props type definitions and consistent naming conventions.</snippet>
      </doc>
      <doc>
        <path>docs/architecture/testing-requirements.md</path>
        <title>Testing Requirements</title>
        <section>Testing Best Practices</section>
        <snippet>Use Vitest and React Testing Library for all unit tests. Focus on testing core business logic and component behavior. Structure tests using Arrange-Act-Assert pattern.</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>src/utils/dateLogic.ts</path>
        <kind>utility</kind>
        <symbol>calculateRecommendations</symbol>
        <lines>122-185</lines>
        <reason>Main recommendation engine that processes holiday array and returns Recommendation objects. Already implemented and tested with O(n) complexity.</reason>
      </artifact>
      <artifact>
        <path>src/utils/dateLogic.ts</path>
        <kind>interface</kind>
        <symbol>Recommendation</symbol>
        <lines>13-20</lines>
        <reason>Type definition for recommendation objects containing holiday and recommendation data with proper TypeScript typing.</reason>
      </artifact>
      <artifact>
        <path>src/context/HolidayContext.tsx</path>
        <kind>context</kind>
        <symbol>HolidayContext</symbol>
        <lines>26-26</lines>
        <reason>Centralized state management for holiday list that should be used for real-time recommendation updates when holidays change.</reason>
      </artifact>
      <artifact>
        <path>src/context/HolidayContext.tsx</path>
        <kind>interface</kind>
        <symbol>Holiday</symbol>
        <lines>11-15</lines>
        <reason>Type definition for holiday objects that are processed by calculateRecommendations function.</reason>
      </artifact>
      <artifact>
        <path>src/components/HolidayList.tsx</path>
        <kind>component</kind>
        <symbol>HolidayList</symbol>
        <lines>10-31</lines>
        <reason>Reference pattern for list component structure and empty state handling that should be followed for Recommendations section.</reason>
      </artifact>
      <artifact>
        <path>src/App.tsx</path>
        <kind>component</kind>
        <symbol>App</symbol>
        <lines>6-24</lines>
        <reason>Root component structure where Recommendations section should be integrated alongside existing components.</reason>
      </artifact>
    </code>
    <dependencies>
      <framework name="react" version="^18.2.0" />
      <framework name="typescript" version="^5.2.2" />
      <testing name="vitest" version="^1.4.0" />
      <testing name="@testing-library/react" version="^14.2.1" />
      <testing name="@testing-library/jest-dom" version="^6.1.5" />
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>Components must be React functional components with TypeScript strict typing following established patterns in HolidayList and HolidayForm</constraint>
    <constraint>Recommendations must update automatically when holiday list changes - use HolidayContext for state management access</constraint>
    <constraint>Follow existing component structure and naming conventions (PascalCase for components, proper Prop interfaces)</constraint>
    <constraint>Implement proper responsive design using Tailwind CSS consistent with existing components</constraint>
    <constraint>All recommendations must be sorted chronologically by holiday date - use the sorted output from calculateRecommendations</constraint>
    <constraint>Implement accessibility features with proper ARIA labels as per technical specification requirements</constraint>
    <constraint>Test files should follow Vitest + React Testing Library patterns established in existing component tests</constraint>
  </constraints>

  <interfaces>
    <interface>
      <name>RecommendationCardProps</name>
      <kind>React Component Props</kind>
      <signature>interface RecommendationCardProps { recommendation: Recommendation; }</signature>
      <path>src/components/RecommendationCard.tsx</path>
    </interface>
    <interface>
      <name>RecommendationsSectionProps</name>
      <kind>React Component Props</kind>
      <signature>interface RecommendationsSectionProps { recommendations: Recommendation[]; isLoading?: boolean; }</signature>
      <path>src/components/RecommendationsSection.tsx</path>
    </interface>
    <interface>
      <name>calculateRecommendations</name>
      <kind>Utility Function</kind>
      <signature>function calculateRecommendations(holidays: Holiday[]): Recommendation[]</signature>
      <path>src/utils/dateLogic.ts</path>
    </interface>
    <interface>
      <name>HolidayContextType</name>
      <kind>React Context Interface</kind>
      <signature>interface HolidayContextType { holidays: Holiday[]; addHoliday: (name: string, date: string) => StorageError | null; deleteHoliday: (id: string) => StorageError | null; }</signature>
      <path>src/context/HolidayContext.tsx</path>
    </interface>
  </interfaces>

  <tests>
    <standards>Use Vitest and React Testing Library with TypeScript support. Follow Arrange-Act-Assert pattern. Component tests should verify rendering behavior, state updates, and accessibility. Test both populated and empty states. Focus on user interaction behavior and responsive design.</standards>
    <locations>src/components/__tests__/RecommendationCard.test.tsx, src/components/__tests__/RecommendationsSection.test.tsx, src/components/__tests__/RecommendationsIntegration.test.tsx</locations>
    <ideas>
      <test>
        <ac>1</ac>
        <idea>Test RecommendationsSection renders with proper "Recommendations" heading and is visible on page</idea>
      </test>
      <test>
        <ac>2</ac>
        <idea>Test recommendations update when holiday list changes via HolidayContext state updates</idea>
      </test>
      <test>
        <ac>3</ac>
        <idea>Test empty state displays "No long-weekend opportunities found" message when calculateRecommendations returns empty array</idea>
      </test>
      <test>
        <ac>4</ac>
        <idea>Test RecommendationCard displays formatted recommendation with holiday name, date, recommended day, and explanation</idea>
      </test>
      <test>
        <ac>5</ac>
        <idea>Test recommendations are displayed in chronological order by holiday date</idea>
      </test>
      <test>
        <ac>6</ac>
        <idea>Test accessibility with proper ARIA labels, screen reader compatibility, and responsive design behavior</idea>
      </test>
    </ideas>
  </tests>
</story-context>